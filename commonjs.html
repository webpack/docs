<!DOCTYPE html><html><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width, initial-scale=1.0"><meta name=description content=""><meta name=author content=""><link rel=icon type=image/png href=/assets/favicon.png><link rel=stylesheet href=css/doc.css><title>commonjs</title><body><script src=js/doc.js charset=utf-8 async></script><div class=container><div class=row><div class=col-md-3><div class=logo><ul class=cube-inner><li class=front></li><li class=back></li><li class=right></li><li class=left></li><li class=top></li><li class=bottom></li></ul><ul class=cube><li class=front></li><li class=back></li><li class=right></li><li class=left></li><li class=top></li><li class=bottom></li><li class=floor></li></ul></div><div class=name>webpack</div><div class=tagline>MODULE BUNDLER</div><div class=sidebar><p><a href=.>Home</a></p><ul><li>Getting Started<ul><li><a href=motivation.html>Motivation</a></li><li><a href=what-is-webpack.html>What is webpack?</a></li><li><a href=installation.html>Installation</a> (WIP)</li><li><a href=usage.html>Usage</a> (WIP)</li><li>Require Modules (WIP)</li><li>Vendor Modules (WIP)</li><li><a href=using-loaders.html>Using Loaders</a></li><li>Dev Tools (WIP)</li></ul></li><li>Step-by-step tutorials<ul><li><a href="http://webpack.github.io/docs/tutorials/getting-started/">Getting started</a></li></ul></li><li>Guides<ul><li><a href=commonjs.html>CommonJs</a></li><li><a href=amd.html>AMD</a></li><li><a href=usage-with-grunt.html>Usage with Grunt</a></li><li><a href=usage-with-gulp.html>Usage with gulp</a></li><li><a href=webpack-for-browserify-users.html>webpack for browserify users</a></li><li><a href=code-splitting.html>Code Splitting</a></li><li><a href=optimization.html>Optimization</a></li><li><a href=long-time-caching.html>Long-time Caching</a></li><li><a href=how-to-write-a-loader.html>How to write a loader</a></li><li>How to write a plugin (WIP)</li><li><a href=shimming-modules.html>Shimming modules</a></li><li><a href=testing.html>Testing</a></li><li><a href=comparison.html>Comparison</a></li></ul></li><li>Lists<ul><li><a href=list-of-loaders.html>List of loaders</a></li><li><a href=list-of-plugins.html>List of plugins</a></li></ul></li><li>API<ul><li><a href=configuration.html>Configuration</a></li><li><a href=cli.html>CLI</a></li><li><a href=node.js-api.html>Node.js API</a></li><li><a href=api-in-modules.html>API in modules</a></li><li><a href=loaders.html>Loaders</a></li><li><a href=plugins.html>Plugins</a></li><li><a href=context.html>Context</a></li><li><a href=resolving.html>Resolving</a></li><li><a href=hot-module-replacement.html>Hot Module Replacement</a></li><li>Dev Tools<ul><li><a href=webpack-dev-server.html>webpack-dev-server</a></li><li><a href=webpack-dev-middleware.html>webpack-dev-middleware</a></li></ul></li></ul></li><li>Development<ul><li><a href=changelog.html>Changelog</a></li><li><a href=roadmap.html>Roadmap</a></li><li><a href=ideas.html>Ideas</a></li><li>Contributing (WIP)</li></ul></li></ul></div></div><div class=col-md-9><div class=pull-right><a href=https://github.com/webpack/docs/wiki/commonjs/_edit id=wikieditlink>Edit</a></div><div class=row><div class=col-md-12><div class=page-header><h1 id=wikititle>commonjs</h1></div></div></div><div class=row><div id=wiki class=col-md-12><div class=contents><ul><li><a href=#plain-simple-javascript>Plain Simple JavaScript</a></li><li><a href=#module-definitions>Module definitions</a></li><li><a href=#module-dependency>Module dependency</a></li><li><a href=#examples>Examples</a><ul><li><a href=#functions>Functions</a></li></ul></li></ul></div><p>The CommonJS group defined a module format to solve JavaScript scope issues by making sure each module is executed in its own namespace.</p><p>This is achieved by forcing modules to explicitly export those variables it wants to expose to the “universe”, and also by defining those other modules required to properly work.</p><p>To achieve this CommonJS give you two tools:</p><ol><li>the <code>require()</code> function, which allows to import a given module into the current scope.</li><li>the <code>module</code> object, which allows to export something from the current scope.</li></ol><p>The mandatory hello world example:</p><h2 id=plain-simple-javascript><a class=anchor href=#plain-simple-javascript>&rarr;</a>Plain Simple JavaScript</h2><p>Here is an examples without CommonJS:</p><p>We will define a value in a script file named <code>salute.js</code>. This script will contain just a value that will be used in other scripts:</p><pre><code><span class=comment>// salute.js</span>
<span class=keyword>var</span> MySalute = <span class=string>"Hello"</span>;</code></pre><p>Now, in a second file named <code>world.js</code>, we are going to use the value defined in <code>salute.js</code>.</p><pre><code><span class=comment>// world.js</span>
<span class=keyword>var</span> Result = MySalute + <span class=string>" world!"</span>;</code></pre><h2 id=module-definitions><a class=anchor href=#module-definitions>&rarr;</a>Module definitions</h2><p>As it is, <code>world.js</code> will not work as <code>MySalute</code> is not defined. We need to define each script as a module:</p><pre><code><span class=comment>// salute.js</span>
<span class=keyword>var</span> MySalute = <span class=string>"Hello"</span>;
module.exports = MySalute;</code></pre><pre><code><span class=comment>// world.js</span>
<span class=keyword>var</span> Result = MySalute + <span class=string>"world!"</span>;
module.exports = Result;</code></pre><p>Here we make use of the special object <code>module</code> and place a reference of our variable into <code>module.exports</code> so the CommonJS module system nows this is the object of our module we want to show to the world. <code>salute.js</code> discloses <code>MySalute</code>, and <code>world.js</code> discloses <code>Result</code>.</p><h2 id=module-dependency><a class=anchor href=#module-dependency>&rarr;</a>Module dependency</h2><p>We’re near but there’s still a step missing: dependency definition. We’ve already defined every script as an independent module, but <code>world.js</code> still needs to now who defines <code>MySalute</code>:</p><pre><code><span class=comment>// salute.js</span>
<span class=keyword>var</span> MySalute = <span class=string>"Hello"</span>;
module.exports = MySalute;</code></pre><pre><code><span class=comment>// world.js</span>
<span class=keyword>var</span> MySalute = require(<span class=string>"./salute"</span>);
<span class=keyword>var</span> Result = MySalute + <span class=string>"world!"</span>;
module.exports = Result;</code></pre><p>Note that we didn’t use the full filename <code>salute.js</code> but <code>.<span class=regexp>/salute</span></code> when calling <code>require</code>, so you can omit the extension of your scripts. <code>.<span class=regexp>/</span></code> means that the <code>salute</code> module is in the same directory as the <code>world</code> module.</p><h2 id=examples><a class=anchor href=#examples>&rarr;</a>Examples</h2><h3 id=functions><a class=anchor href=#functions>&rarr;</a>Functions</h3><pre><code><span class=comment>// moduleA.js</span>
module.exports = <span class=function><span class=keyword>function</span><span class=params>( value )</span>{</span>
    <span class=keyword>return</span> value*<span class=number>2</span>;
}</code></pre><pre><code><span class=comment>// moduleB.js</span>
<span class=keyword>var</span> multiplyBy2 = require(<span class=string>'moduleA'</span>);
<span class=keyword>var</span> result = multiplyBy2( <span class=number>4</span> );</code></pre></div></div></div></div></div><a href=https://github.com/webpack/webpack><img style="position: absolute; top: 0; left: 0; border: 0" src=https://s3.amazonaws.com/github/ribbons/forkme_left_orange_ff7600.png alt="Fork me on GitHub"></a>